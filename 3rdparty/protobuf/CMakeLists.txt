if (CMAKE_SYSTEM_NAME MATCHES "Windows")
    find_package(Protobuf CONFIG REQUIRED)
else()    
    find_package(Protobuf REQUIRED)
endif()
FILE(GLOB protofiles "${CMAKE_CURRENT_SOURCE_DIR}/*.proto")
message(STATUS ${protofiles})
PROTOBUF_GENERATE_CPP(PROTOSRCS PROTOHDRS ${protofiles})
protobuf_generate_python(${CMAKE_BINARY_DIR}/pySMFRETda/serv_pdaga ${protofiles})
message(STATUS ${PROTOSRCS})
add_library(proto STATIC ${PROTOSRCS} ${PROTOHDRS}) 
if (CMAKE_SYSTEM_NAME MATCHES "Windows")
    target_link_libraries(proto PRIVATE protobuf::libprotoc protobuf::libprotobuf protobuf::libprotobuf-lite)
else()
    target_link_libraries(proto PRIVATE ${Protobuf_LIBRARIES}) 
endif()
target_include_directories(proto PUBLIC ${CMAKE_CURRENT_BINARY_DIR})